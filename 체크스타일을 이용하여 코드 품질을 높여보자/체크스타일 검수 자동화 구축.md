
## ë°œë‹¨
í˜„ì¬ ìš°ë¦¬ ë°±ì—”ë“œ í”„ë¡œì íŠ¸ëŠ” ìë°” ê³„ì—´ì—ì„œ ì£¼ë¡œ ì“°ëŠ” ì •ì  ë¶„ì„ ë„êµ¬ì¸ "ì²´í¬ìŠ¤íƒ€ì¼" ì„ ì´ìš©í•˜ì—¬ ì»¨ë²¤ì…˜ì„ ì¤€ìˆ˜ í•˜ê³  ìˆì—ˆë‹¤. ê·¸ëŸ°ë° ì–¸ì œë¶€í„´ê°€ ì¸ë´íŠ¸ ë¼ë˜ì§€ ê³µë°± ë“± ì»¨ë²¤ì…˜ì´ ì œëŒ€ë¡œ ì§€ì¼œì§€ì§€ ì•ŠëŠ” ì½”ë“œë“¤ì´ ì¤‘ê°„ ì¤‘ê°„ ë°œìƒí•˜ì—¬ CI ê°€ ì‹¤íŒ¨í•˜ëŠ” í˜„ìƒì´ ë²Œì—¬ì¡Œë‹¤.

## ë¬¸ì œ ì›ì¸
ìš°ë¦¬ëŠ” ``pre-commit`` ì´ë¼ëŠ” ê¹ƒí›…ì„ ì´ìš©í•˜ì—¬ ì»¤ë°‹ í•˜ê¸° ì „ì— build.gradle ì— ì •ì˜í•œ checkstyle íƒœìŠ¤í¬ë¥¼ ì‹¤í–‰í•˜ë„ë¡ ì„¤ì •í•´ë†“ì•˜ë‹¤. ê·¸ë˜ì„œ ê³µìš©ìœ¼ë¡œ ì‚¬ìš©í•  ``pre-commit`` íŒŒì¼ì„ ì‘ì„± í•œ ë‹¤ìŒ, Git Wiki ì— ê°€ì´ë“œë¼ì¸ê³¼ í•¨ê»˜ ê³µìœ í•´ë†“ì•˜ë‹¤. íŒ€ì›ë“¤ì€ ê°€ì´ë“œì— ë§ì¶° ê°ì ë¡œì»¬ í™˜ê²½ì—ì„œ ``pre-commit`` ì‘ì„±í•´ì£¼ë©´ ëì´ì˜€ë‹¤.

![[Pasted image 20250519001257.png]]

ë¬¸ì œëŠ” ë¡œì»¬ ê°œë°œ í™˜ê²½ì´ ë‹¬ë¼ì§ˆ ê²½ìš°, ì¦‰, ìƒˆë¡­ê²Œ git clone ì„ ë°›ì€ ê²½ìš° ``.git`` í´ë”ê°€ ìƒˆë¡œ ìƒì„± ë˜ê¸° ë•Œë¬¸ì—  ë§¤ë²ˆ ``pre-commit`` íŒŒì¼ì„ ë‹¤ì‹œ ìˆ˜ì •í•´ì¤˜ì•¼í–ˆë‹¤. ê·¸ë ‡ê¸° ë•Œë¬¸ì— **í˜¹ì‹œë‚˜ ê¹œë¹¡í•˜ê³  ``pre-commit`` ì„ ì •ì˜í•˜ì§€ ì•Šì€ ê²½ìš°** ì²´í¬ìŠ¤íƒ€ì¼ ê²€ìˆ˜ê°€ ì´ë¤„ì§€ì§€ ì•Šì€ ì±„ë¡œ ì½”ë“œê°€ ì»¤ë°‹ë˜ê³  í‘¸ì‰¬ëœê²ƒì´ì˜€ë‹¤. 

> ğŸ¤” ë§¤ë²ˆ í”„ë¡œì íŠ¸ë¥¼ clone ë°›ì„ ë•Œë§ˆë‹¤ ì¼ì¼ì´ pre-commit ì„ ì„¤ì •í•˜ì§€ ì•Šê³  ìë™ìœ¼ë¡œ ê³µìœ ë˜ê³  ì ìš© ì‹œí‚¬ ìˆœ ì—†ì„ê¹Œ?
## í•´ê²°ì±…

ì•ì„œ ì‚´í´ë³¸ ë¬¸ì œ ì›ì¸ì„ í†µí•´ ìš°ë¦¬ê°€ ë³´ì™„ ë° ê°œì„ í•´ì•¼ í•  ì ì€
1. ê¹ƒ í›…ì€ ìë™ìœ¼ë¡œ ê³µìœ  ë˜ì–´ì•¼í•œë‹¤.
2. í”„ë¡œì íŠ¸ ìƒì„± (git clone) ì‹œ ë§ˆë‹¤ ê¹ƒ í›… ì„¤ì •ì„ ë‹¤ì‹œí•  í•„ìš”ê°€ ì—†ì–´ì•¼í•œë‹¤.

ì´ ë‘ê°€ì§€ë¥¼ í•´ê²° í•˜ê¸° ìœ„í•´ ë‹¤ìŒ ë‘ ì‘ì—…ì„ ì‹¤ì‹œí–ˆë‹¤.
### 1. core.hooksPath ë¥¼ ë³€ê²½í•˜ì—¬ ê¹ƒ í›…ì„ ê³µìœ í•˜ê³  ì¤‘ì•™ì—ì„œ ê´€ë¦¬í•˜ì
ê¸°ì¡´ ê¹ƒ í›…ë“¤ì˜ ë¬¸ì œì ì€ ê³µìœ ê°€ ë˜ì§€ ì•ŠëŠ”ë‹¤ëŠ” ê²ƒì´ì˜€ë‹¤. ê¸°ë³¸ì ìœ¼ë¡œ ê¹ƒ í›…ì€ ``.git/hooks`` ì•ˆì— ì¡´ì¬í•˜ê¸° ë•Œë¬¸ì— ê³µìœ  ë  ìˆ˜ê°€ ì—†ì—ˆë‹¤. ì´ëŸ° ë¬¸ì œ ë•Œë¬¸ì— ê¹ƒì€ 2.9 ë²„ì „ ë¶€í„° ``core.hooksPath`` ì„¤ì •ì„ í†µí•´ ``hooks`` ë””ë ‰í† ë¦¬ì˜ ìœ„ì¹˜ë¥¼ ì„ì˜ë¡œ ì§€ì • í•  ìˆ˜ ìˆê²Œ ë˜ì—ˆë‹¤. 
![[Pasted image 20250519004729.png]]

ì´ë ‡ê²Œ ë£¨íŠ¸ì— ``.githooks`` ë¼ëŠ” í´ë”ë¥¼ ë§Œë“  ë‹¤ìŒ, ê¹ƒ í›…ë“¤ì„ ê·¸ ì•ˆì— ì •ì˜ í•´ë†“ê³ 

```shell
git config core.hooksPath .githooks
chmod +x .githooks/ê¹ƒí›…íŒŒì¼ëª…
```

ë¼ê³  ëª…ë ¹ì–´ë§Œ ì…ë ¥í•´ì¤Œìœ¼ë¡œì¨ ë²„ì „ê´€ë¦¬ì™€ ê³µìœ ë¥¼ ì† ì‰½ê²Œ í•˜ê²Œë˜ì—ˆë‹¤.

> ğŸ¤” ì € ëª…ë ¹ì–´ ì…ë ¥ í•˜ëŠ” ê²ƒ ì¡°ì°¨ ë•Œë¡  ê¹œë¹¡í•  ìˆ˜ ìˆì§€ ì•Šì„ê¹Œ? ì €ê²ƒë„ ìë™í™” í•  ìˆ˜ ì—†ì„ê¹Œ?
### 2. build.gradle ì— ê¹ƒ í›… ì„¤ì • ìŠ¤í¬ë¦½íŠ¸ ì‘ì„±
ì´ë¥¼ í•´ê²°í•˜ê¸°ìœ„í•´ gradle ìŠ¤í¬ë¦½íŠ¸ íŒŒì¼ì„ ë‹¤ìŒê³¼ ê°™ì´ ì‘ì„±í•´ì£¼ì—ˆë‹¤.

```groovy
// GitHooks ì…‹ì—… íƒœìŠ¤í¬  
tasks.register('installGitHooks', Exec) {  
  description = 'Git í›…ì„ ì„¤ì •í•©ë‹ˆë‹¤'  
  group = 'setup'  
  
  doFirst {  
    // pre-commit í›… ì„¤ì •  
    def preCommitFile = file("${rootDir}/.githooks/pre-commit")  
    if (preCommitFile.exists()) {  
      preCommitFile.setExecutable(true)  
    } else {  
      throw new GradleException("pre-commit í›… íŒŒì¼ì´ ì¡´ì¬í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤. .githooks/pre-commit íŒŒì¼ì„ ìƒì„±í•˜ì„¸ìš”.")  
    }  
  
    // pre-push í›… ì„¤ì •  
    def prePushFile = file("${rootDir}/.githooks/pre-push")  
    if (prePushFile.exists()) {  
      prePushFile.setExecutable(true)  
    } else {  
      throw new GradleException("pre-push í›… íŒŒì¼ì´ ì¡´ì¬í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤. .githooks/pre-push íŒŒì¼ì„ ìƒì„±í•˜ì„¸ìš”.")  
    }  
  
  }  
  
  // git config ëª…ë ¹ ì‹¤í–‰  
  commandLine 'git', 'config', 'core.hooksPath', '.githooks'  
  
  doLast {  
    println "Git í›…ì´ ì„±ê³µì ìœ¼ë¡œ ì„¤ì •ë˜ì—ˆìŠµë‹ˆë‹¤."  
  }  
}  
  
// ëª¨ë“  í”„ë¡œì íŠ¸ì— ëŒ€í•œ ì„¤ì •ì„ ì ìš©í•˜ê¸° ìœ„í•´ build íƒœìŠ¤í¬ì— ì˜ì¡´ì„± ì¶”ê°€  
tasks.named('build') {  
  dependsOn 'installGitHooks'  
}
```

#### ``installGitHooks`` 
  -  ê¹ƒ í›…ì„ ì…‹ì—… í•´ì£¼ëŠ” gradle task
  - .githooks ì— ê¹ƒ í›…íŒŒì¼ì´ ìˆëŠ”ì§€ ì—†ëŠ”ì§€ í™•ì¸ í›„ì—, ìˆìœ¼ë©´ ì‹¤í–‰ ê¶Œí•œì„ ë¶€ì—¬. ì—†ìœ¼ë©´ ì˜ˆì™¸ ì²˜ë¦¬
  - ``git config core.hooksPath .githooks`` ëª…ë ¹ì–´ë¥¼ ì‹¤í–‰í•˜ì—¬ ê¹ƒ í›… ë””ë ‰í† ë¦¬ ê²½ë¡œ ì„¤ì •

``installGitHooks`` íƒœìŠ¤í¬ë¥¼ ë“±ë¡í•´ì¤€ ë‹¤ìŒ ``build`` íƒœìŠ¤í¬ì— ì˜ì¡´ì„±ì„ ì¶”ê°€í•´ì£¼ë©´ ì•ìœ¼ë¡œ í”„ë¡œì íŠ¸ë¥¼ ë¹Œë“œí•´ì¤„ ë•Œë§ˆë‹¤ ì•Œì•„ì„œ ê¹ƒ í›… ì„¤ì •ì´ ë ê²ƒì´ë‹¤.

