
## 발단
현재 우리 백엔드 프로젝트는 자바 계열에서 주로 쓰는 정적 분석 도구인 "체크스타일" 을 이용하여 컨벤션을 준수 하고 있었다. 그런데 언제부턴가 인덴트 라던지 공백 등 컨벤션이 제대로 지켜지지 않는 코드들이 중간 중간 발생하여 CI 가 실패하는 현상이 벌여졌다.

## 문제 원인
우리는 ``pre-commit`` 이라는 깃훅을 이용하여 커밋 하기 전에 build.gradle 에 정의한 checkstyle 태스크를 실행하도록 설정해놓았다. 그래서 공용으로 사용할 ``pre-commit`` 파일을 작성 한 다음, Git Wiki 에 가이드라인과 함께 공유해놓았다. 팀원들은 가이드에 맞춰 각자 로컬 환경에서 ``pre-commit`` 작성해주면 끝이였다.

![[Pasted image 20250519001257.png]]

문제는 로컬 개발 환경이 달라질 경우, 즉, 새롭게 git clone 을 받은 경우 ``.git`` 폴더가 새로 생성 되기 때문에  매번 ``pre-commit`` 파일을 다시 수정해줘야했다. 그렇기 때문에 **혹시나 깜빡하고 ``pre-commit`` 을 정의하지 않은 경우** 체크스타일 검수가 이뤄지지 않은 채로 코드가 커밋되고 푸쉬된것이였다. 

> 🤔 매번 프로젝트를 clone 받을 때마다 일일이 pre-commit 을 설정하지 않고 자동으로 공유되고 적용 시킬 순 없을까?
## 해결책 : core.hooksPath 를 변경

일일이 checkstyle 을 수동으로 실행 시키지 않기 위해 ``pre-commit`` 깃 훅까지 이용 했지만, 이 방법에도 여전히 헛점은 존재했다. 그래서 이런 문제가 재발되지 않기 위해선 좀 더 스마트한 자동화가 필요했다. 인터넷을 찾아보니 다음과 같은 해결책을 얻을 수 있었다.



### core.hooksPath 를 변경하여 깃 훅을 공유하고 중앙에서 관리하자